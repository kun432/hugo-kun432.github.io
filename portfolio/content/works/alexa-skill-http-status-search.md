+++
author = "Kunikai Shimizu"
date = "2018-09-17"
title = "Alexaスキル「HTTPステータス検索」"
linktitle = ""
description = ""
tags = []
categories = []
highlight = true
draft = false

+++

### **はじめに**

Alexaスキル「HTTPステータス検索」のページです。

<img src="/img/icon-alexa-skill-http-status-code.png" width=250 />

### **目次**

<!-- TOC -->

- [**はじめに**](#はじめに)
- [**目次**](#目次)
- [**使い方**](#使い方)
- [**実装について**](#実装について)
- [**今後の予定**](#今後の予定)
- [**更新履歴**](#更新履歴)
- [**プライバシーポリシー**](#プライバシーポリシー)

<!-- /TOC -->

### **使い方**

{{< youtube pkgNYGQvqj4 >}}
<br />
「アレクサ、HTTPステータス検索を開いて」で起動し、その後、「ステータスコード200を教えて」というと、ステータスコードの意味を教えてくれます。
「アレクサ、HTTPステータス検索を開いて200を教えて」と一気に指定することもできます。
<br />
<br />
スキルを利用するには、 Amazonの[スキルページ](https://www.amazon.co.jp/kun432-HTTP%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E6%A4%9C%E7%B4%A2/dp/B07H96LR81/ref=sr_1_1?ie=UTF8&qid=1537198530&sr=8-1&keywords=http+%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9) か [Alexaダッシュボード]( https://alexa.amazon.co.jp/spa/index.html#skills/dp/B07H96LR81/?ref=skill_dsk_skb_sr_0&qid=1537203503) から有効にして下さい。

### **実装について**

<img src="/img/design-alexa-skill-http-status-code.png" width=740 border=1 />

初のAlexaスキルということで、まずはシンプルに「辞書的」なスキルを作ってみました。「任意のキーワードからデータを引っ張ってくる」というのは、Alexaにおけるデータの流れを理解しやすく、かつ、汎用性が高い（データを置き換えるだけでいろいろ応用が効く）パターンだと思うので、最初のテーマとしてはとても良かったと思います。
<br />
<br />
コードは、Alexa Skills Kit SDK for Node.jsのバージョン2で書いてます。シンプルなスキルですが、以下のような工夫も入れてます。

- ちょうどv2が発表された後で情報もあまりなかったのですが、今後v1→v2になっていくことを考えて、情報収集しつつ実装してみました。
- 各HTTPステータスコードの説明は、[Wikipediaの"HTTPステータスコード"](https://ja.wikipedia.org/wiki/HTTP%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89)の説明を元に発話を作っていますが、発話に英語文字列が含まれている（例：101 Switching Protocols）場合、Alexaの読み上げで正しく発音してくれるものとそうでないものがあったりします。そのため、意図的にレスポンスに渡す文字列に含まれる英語文字列をカタカナ英語にするなどの調整をしています。
- 上記に関連して、スマートフォンのAlexaアプリには「カード」機能があり、スキルからのレスポンスを文字列で表示してくれます。一般的な実装では、発話も表示も同じテキストを渡すことが多いようですが、カードに渡す文字列はSSMLを認識せずそのまま表示されるため、発話を調整している場合は発話と表示を分けて管理する必要があります。本スキルではSSMLを使っていないものの、カタカナ表記がそのまま表示されるため、これに対応しています。
- 結論としては、発話と表示は分けて管理する、発話の調整はSSMLを使う、というのがよいということですね。Echo Spotのようなディスプレイ付モデルも出てきたため、今後のノウハウとしたいと思います。

バックエンドも、シンプルにAlexaの一般的かつミニマムな構成としてLambdaのみです。サーバーレスはこれまで使ったことが全くなかったのですが、必要な時だけ瞬時にあがる効率性はスマートスピーカーのユースケースにぴったりですね。Lambdaのバージョン管理や自動化というところは改善の余地がありますので、今後の課題とします。
<br />
<br />
コードはGithubで公開しています。
<br />
https://github.com/kun432/clova-skill-http-status-code

### **今後の予定**

- Echo Spot対応
- ~~Clova/~~Google Home対応

※Clova版は[こちら](/works/clova-skill-http-status-search)

### **更新履歴**

- v1.0 (2018/9/13)
  - 公開

### **プライバシーポリシー**

このアプリケーションでは、ご利用になる皆様のいかなるプライバシー情報も収集、使用、共用することはありません。

<div style="text-align: right;">
2018年9月13日 制定<br />
Kuniaki Shimizu<br />
kun432.8d1w@gmail.com<br />
</div>
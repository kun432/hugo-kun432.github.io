+++
author = "Kunikai Shimizu"
date = "2019-07-30"
title = "Alexaスキル「雨雲マップ」"
linktitle = ""
description = ""
tags = []
categories = []
highlight = true
draft = false

+++

### **はじめに**

Alexaスキル「雨雲マップ」のページです。

<img src="/img/alexa-skill-raincloud-map-icon.png" width=250 />

<img src="">

### **目次**

<!-- TOC -->

- [**はじめに**](#はじめに)
- [**目次**](#目次)
- [**使い方**](#使い方)
- [**実装について**](#実装について)
- [**今後の予定**](#今後の予定)
- [**更新履歴**](#更新履歴)
- [**プライバシーポリシー**](#プライバシーポリシー)
  - [本サービスが取得する利用者情報と利用目的](#本サービスが取得する利用者情報と利用目的)
  - [プライバシーポリシーの変更](#プライバシーポリシーの変更)
  - [お問い合わせ窓口](#お問い合わせ窓口)

<!-- /TOC -->

### **使い方**

「アレクサ、雨雲マップを開いて」で起動します。初回起動時のみ、Alexaデバイスの住所情報より郵便番号を取得し、郵便番号より得られる大まかな地域名ならびに大まかな緯度経度を取得し、以降の利用ではそれらを元に、お住いの地域の雨雲レーダー画像を表示、現在および１時間後の雨の状況をお伝えします。ディスプレイ付きデバイス（Echo Spot/Echo Show）でのみ利用可能です。
<br />
<br />

### **実装について**

プロトタイプ作成後から少し時間が空いてしまいましたが、やっと完成させることができました。今回のテーマは「VoiceflowでAPIを活用したスキル」です。
<br />
<br />
同一の機能を持つスキルは他にも存在しますが、本スキルの優位性は以下の２点です。
<br />
<br />

- 最初に地域を登録しておけば、毎回いちいち地域名を言わなくても良い
- 利用者ごとに異なるロケーションにあわせて最適化することにより、利用者の利便性を向上する

これまで作成してきたスキルでは、基本的にすべてのユーザに対して一律の機能を提供してきましたが、よりユーザごとにカスタマイズ性をもたせたスキル開発を行いたい、ということで、今回はAlexaの所在地情報APIを使ってみました。また、画面付きデバイス向けにマップ画像を使ったシンプルなスキルを作ってみたかったということもあり、Yahoo!JAPAN様が提供されている郵便番号API/スタティックマップAPI/気象情報APIと組み合わせて、
<br />
<br />

- 所在地情報APIで郵便番号を取得
- 郵便番号APIで大まかな地域名ならびに大まかな緯度経度を取得
- スタティックマップAPIで雨雲情報が付与されたマップ画像を取得
- 気象情報APIで現在・１時間後の降雨量（予測）を取得

という形で、一度地域を登録しさえすれば、あとは起動するだけで最短で必要な雨雲情報・気象情報取り出せるというものになっています。
<br />
<br />
また、今回はスキル開発プラットフォームにVoiceflowを使っています。Voiceflowは以前から活用しており、実際に複数のシンプルなスキルをリリースしていますし、テスト的に凝ったこともやっていますが、今回は、複数の外部APIを叩いたり、アクセス権処理を追加したり、画面付きデバイス向けの画面対応など、かなりできることを盛り込んだ上で申請・公開する、というのをテーマにしていました。
<br />
<br />
ノンコーディングなのでかんたんだと思われがちですが（事実シンプルなものであればかんたんです）、実際には、設計書を作って、コードで同じことをやって、その上でVoiceflowで一度プロトタイプ組んで、と実は結構時間をかけています。というのも、この手のGUIツールは、かんたんにスタートができる反面、よく考えずに進めていくと、最終的にフローがぐちゃぐちゃになってしまい、非常にメンテがしづらいものになってしまう可能性が高いためです。こういった部分は外からは見えませんが、将来的な運用・保守コストを踏まえて、少し設計段階からきちんと考えてみました。
<br />
<br />
それでもコードを書くことに比べると、やはり保守の観点ではいろいろ課題は多い印象ですが、プロトタイピングやそれほど規模が大きくないものであれば、非常にスピーディーにスキルリリースまで進めれてしまう素晴らしいツールですし、このあたりで得られた知見を開発元やコミュニティに共有していくことで、Voiceflowがスキル開発初心者のみならずスキル開発経験者にも有用なツールとして日本でも普及し、Alexa開発者の裾野を広げれれば良いなと思ってます。
<br />
<br />

### **今後の予定**

- 未定

### **更新履歴**

- v1.0(2019/07/30)
  - 公開中

### **プライバシーポリシー**

kun432（以下，「私」といいます。）が提供するAlexaスキル「雨雲マップ」（以下、「本スキル」といいます。）および本スキルの利用により提供されるサービス（以下、本スキルの利用含め「本サービス」といいます。）をご利用いただく際に取得する「利用者情報」の取扱いについて，以下のとおりプライバシーポリシー（以下，「本ポリシー」といいます。）を定めます。
<br/>
<br/>
#### 本サービスが取得する利用者情報と利用目的
<br/>
本サービスでは、Alexaアプリ・Echoデバイスに登録された利用者の「住所」のうち「郵便番号」を取得し、Yahoo! JAPANが提供する以下のAPI（以下、「外部API」といいます。）に対して、取得した「郵便番号」を送信することで、利用者のお住いの地域に基づいた気象情報の提供を行います。
<br/>
<br/>

- 「郵便番号検索API」
  - 郵便番号から、お住いの地域の大まかな地域名および大まかな緯度経度を取得します。
- 「Yahoo!スタティックマップAPI」および「気象情報API」
  - 上記で取得した緯度経度から、お住いの地域の雨雲レーダー画像および降水強度情報を取得します。

<br/>
本機能は、ご使用になられるAlexaアプリにて、利用者ご自身が本サービスに対して「住所」へのアクセスを許可する必要があります。これらに対して、利用者が許可しない限り、本サービスが「郵便番号」を取得することも、外部APIへ「郵便番号」を送信することもありません。また、郵便番号を元に取得した地域名をスキル内に保存し、サービスの利用において地域名を活用するかどうかを利用者に確認します。これに対して、利用者が同意しない限り、本サービスの利用を開始することはできません。本サービスの有効化、「住所」へのアクセス許可、ならびにスキルへの保存を許可することにより、利用者がこれらの情報の提供に同意したものとみなしますのでご留意ください。なお、これらの情報は、利用者に払い出されているユーザ識別子と紐付いていますが、スキルを無効化することによりユーザ識別子が変更されるため、取得した地域名にアクセスすることはできなくなります。
<br/>
また、取得した情報は、本スキルの機能を提供するために一時的に利用するにとどまり、本ポリシーに記載されている場合を除き、第三者への提供を行うことはございません。
<br/>
<br/>
#### プライバシーポリシーの変更
<br/>
本ポリシーは、個人情報に関して適用される日本の法令を遵守するとともに、内容を適宜見直しその改善に努めるものとして、利用者に通知することなく変更する場合があります。修正された最新のプライバシーポリシーは常に本ページにて開示されるものとします。
<br/>
<br/>
#### お問い合わせ窓口
<br/>
本ポリシーに関するお問い合わせは，下記のメールでのみお受けしております。ご了承ください。
<br/>
<br/>
名前： kun432(Kuniaki Shimizu)<br/>
Eメールアドレス：kun432.8d1w@gmail.com
<br/>
<br/>
以上

<div style="text-align: right;">
2019年07月28日 制定<br />
2019年07月30日 改定<br />
</div>
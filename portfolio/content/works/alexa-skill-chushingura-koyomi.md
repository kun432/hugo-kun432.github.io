+++
author = "Kunikai Shimizu"
date = "2018-12-20"
title = "Alexaスキル「忠臣蔵こよみ」"
linktitle = ""
description = ""
tags = []
categories = []
highlight = true
draft = false

+++

### **はじめに**

Alexaスキル「忠臣蔵こよみ」のページです。

<img src="/img/alexa-skill-chushingura-koyomi.png" width=250 />

### **目次**

<!-- TOC -->

- [**はじめに**](#はじめに)
- [**目次**](#目次)
- [**使い方**](#使い方)
- [**実装について**](#実装について)
- [**今後の予定**](#今後の予定)
- [**更新履歴**](#更新履歴)
- [**プライバシーポリシー**](#プライバシーポリシー)

<!-- /TOC -->

### **使い方**

{{< youtube kweDHYJbrSw >}}
<br />
「アレクサ、忠臣蔵こよみを開いて」で起動して、その後、「知りたい」と答えると、忠臣蔵の討ち入り日である12月15日までの日数を数えてくれます。
<br />
<br />
<!-- スキルを利用するには、 Amazonの[スキルページ](https://www.amazon.co.jp/kun432-HTTP%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E6%A4%9C%E7%B4%A2/dp/B07H96LR81/ref=sr_1_1?ie=UTF8&qid=1537198530&sr=8-1&keywords=http+%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9) か [Alexaダッシュボード]( https://alexa.amazon.co.jp/spa/index.html#skills/dp/B07H96LR81/?ref=skill_dsk_skb_sr_0&qid=1537203503) から有効にして下さい。 -->

### **実装について**

<img src="/img/design-alexa-skill-http-status-code.png" width=740 border=1 />

今回のポイントは2点です。

- Echo Spotのような画面付きデバイス向けにDisplay Templateを使用し画像表示を行っています。また、画面付きデバイスの場合は、音声だけではなく、リストメニューを使ったタップによる入力も可能なので、これも実装してみました。
- Alexaの声は、標準では女性の声なのですが、テーマに合わせて男性の声を使いたい、ということで、Amazon Pollyを使ってみました。SSMLだけで実装できるので非常に簡単です。あと、思いのほか、武士言葉でも普通に喋ってくれてびっくりしました（笑）

元々の音声のみのインタラクションは、これまでのGUIとは考え方が異なる難しさがありましたが、画面表示ができることにより視覚的に補完できる反面はあるものの、考慮すべきことも多くなり、違う意味での難しさもあるなと感じました。特に、

- シミュレータと実機で動きが違ったり、Echo Showの実機がなかったり、でテストが難しい。
- 画面付きの場合、セッションを明示的に切る必要があるが、挙動にばらつきがある。
- 複数のテンプレートが用意されており、かつ、同じテンプレートでもSpot/Showで見え方や画像処理が違う。

あたりはまだ手探り感があり、引き続きいろいろ試していく必要があると思っています。Echo Showも発売され、Fire TVもAlexa対応、さらにマルチモーダルな画面設計が行えるAPLなど、画面対応については非常に可能性があると思ってます。

あと、このスキル、討ち入り当日の12/15は時間ごとに討ち入りの模様が効果音付きで説明されます。今回最も苦労したのは、それを作るために、忠臣蔵の正確な時間推移を追うために書籍漁ったり、良さげで効果音を探すことだったり、します（笑）
<br />
<br />
コードは、Alexa Skills Kit SDK for Node.jsのバージョン2で書いてます。バックエンドも定番の構成です。
<br />
コードはGithubで公開予定です。
<br />
https://github.com/kun432/alexa-skill-chushingura-koyomi

### **今後の予定**

- Clova/Google Home対応

### **更新履歴**

- v1.0 (2018/11/13)
  - 公開

### **プライバシーポリシー**

このアプリケーションでは、ご利用になる皆様のいかなるプライバシー情報も収集、使用、共用することはありません。

<div style="text-align: right;">
2018年11月11日 制定<br />
Kuniaki Shimizu<br />
kun432.8d1w@gmail.com<br />
</div>